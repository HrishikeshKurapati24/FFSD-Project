<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= brand.name %> Profile | CollabSync
    </title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/B2_index/B2_profile2.css">
</head>

<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <div class="logo">CollabSync</div>
            <nav>
                <ul>
                    <li><a href="/brand/home">Home</a></li>
                    <li><a href="/brand/explore">Explore Influencers</a></li>
                    <li><a href="/brand/profile">My Brand Profile</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Sidebar Navigation -->
    <button class="toggle-btn" onclick="openMenu()">â˜°</button>
    <div class="menu" id="navMenu">
        <span class="close-btn" onclick="closeMenu()">&times;</span>
        <a href="/brand/collab">Collabs</a>
        <a href="/brand/recievedRequests">Collab Requests</a>
        <a href="/brand/create_collab">Create Collab</a>
        <a href="/">Sign Out</a>
    </div>

    <div class="container">
        <!-- Profile Banner -->
        <section class="profile-banner">
            <div class="banner-image">
                <button class="edit-banner-btn" onclick="openEditModal()">
                    <i class="fas fa-camera"></i> Edit Banner
                </button>
            </div>
            <div class="profile-info">
                <div class="profile-pic">
                    <img src="<%= brand.logoUrl || '/images/default-brand.png' %>" alt="<%= brand.name %>">
                    <button class="edit-profile-pic-btn" onclick="openEditModal()">
                        <i class="fas fa-camera"></i>
                    </button>
                </div>
                <div class="profile-name">
                    <h1>
                        <%= brand.name %>
                    </h1>
                    <p class="username">@<%= brand.username %>
                    </p>
                    <div class="profile-status">
                        <% if (brand.verified) { %>
                            <span class="premium-badge">
                                <i class="fas fa-check-circle"></i> VERIFIED
                            </span>
                            <% } else { %>
                                <span class="premium-badge" style="background: #ccc;">
                                    <i class="fas fa-clock"></i> PENDING VERIFICATION
                                </span>
                                <% } %>
                                    <span class="influence-info">
                                        Primary market: <%= brand.primaryMarket || 'Not specified' %>
                                            <% if (brand.primaryMarket) { %>
                                                <%= brand.primaryMarket.includes('Global') ? 'ðŸŒŽ' : '' %>
                                                    <%= brand.primaryMarket.includes('US') ? 'ðŸ‡ºðŸ‡¸' : '' %>
                                                        <%= brand.primaryMarket.includes('UK') ? 'ðŸ‡¬ðŸ‡§' : '' %>
                                                            <%= brand.primaryMarket.includes('Europe') ? 'ðŸ‡ªðŸ‡º' : '' %>
                                                                <%= brand.primaryMarket.includes('Asia') ? 'ðŸŒ' : '' %>
                                                                    <% } %>
                                    </span>
                    </div>
                </div>
            </div>
        </section>

        <div class="profile-content">
            <div class="profile-main">

                <!-- About Tab -->
                <div id="about-tab" class="tab-content active">
                    <div class="profile-bio">
                        <div class="section-header">
                            <h2>About <%= brand.name %>
                            </h2>
                            <button class="btn-edit" onclick="openEditModal()">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                        </div>
                        <p class="bio-text">
                            <%= brand.description || 'No description provided.' %>
                        </p>

                        <% if (brand.mission) { %>
                            <div class="info-section mission-section">
                                <h3><i class="fas fa-bullseye"></i> Our Mission</h3>
                                <p>
                                    <%= brand.mission %>
                                </p>
                            </div>
                            <% } %>

                                <% if (brand.currentCampaign) { %>
                                    <div class="info-section campaign-section">
                                        <h3><i class="fas fa-rocket"></i> Current Campaign Goals</h3>
                                        <p>
                                            <%= brand.currentCampaign %>
                                        </p>
                                    </div>
                                    <% } %>

                                        <div class="info-section values-section">
                                            <h3><i class="fas fa-heart"></i> Brand Values</h3>
                                            <div class="values-tags">
                                                <% brand.values.forEach(value=> { %>
                                                    <span class="value-tag">
                                                        <%= value %>
                                                    </span>
                                                    <% }); %>
                                            </div>
                                        </div>
                    </div>

                    <div class="metrics-section">
                        <h2>Brand Performance</h2>
                        <div class="metrics-grid">
                            <div class="metric-card">
                                <div class="metric-icon"><i class="fas fa-chart-line"></i></div>
                                <div class="metric-value">
                                    <%= brand.completedCampaigns %>
                                </div>
                                <div class="metric-label">Campaigns</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-icon"><i class="fas fa-users"></i></div>
                                <div class="metric-value">
                                    <%= brand.influencerPartnerships %>
                                </div>
                                <div class="metric-label">Partnerships</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-icon"><i class="fas fa-star"></i></div>
                                <div class="metric-value">
                                    <%= brand.avgCampaignRating %>
                                </div>
                                <div class="metric-label">Avg. Rating</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-icon"><i class="fas fa-bullhorn"></i></div>
                                <div class="metric-value">
                                    <%= brand.totalAudience.toLocaleString() %>
                                </div>
                                <div class="metric-label">Total Audience</div>
                            </div>
                        </div>
                    </div>

                    <div class="campaigns-section">
                        <h2>Top Campaigns</h2>
                        <% if (brand.topCampaigns && brand.topCampaigns.length> 0) { %>
                            <div class="campaigns-grid">
                                <% brand.topCampaigns.forEach(campaign=> { %>
                                    <div class="campaign-card">
                                        <div class="campaign-status <%= campaign.status.toLowerCase() %>">
                                            <i class="fas fa-circle"></i>
                                            <%= campaign.status %>
                                        </div>
                                        <h3 class="campaign-title">
                                            <%= campaign.title %>
                                        </h3>
                                        <div class="campaign-stats">
                                            <div class="stat">
                                                <i class="fas fa-chart-line"></i>
                                                <span>
                                                    <%= campaign.performance_score ?
                                                        campaign.performance_score.toFixed(1) : '0.0' %>
                                                </span>
                                                <label>Performance</label>
                                            </div>
                                            <div class="stat">
                                                <i class="fas fa-eye"></i>
                                                <span>
                                                    <%= campaign.reach ? campaign.reach.toLocaleString() : '0' %>
                                                </span>
                                                <label>Reach</label>
                                            </div>
                                        </div>
                                    </div>
                                    <% }); %>
                            </div>
                            <% } else { %>
                                <p class="no-data-message">No campaigns available to display.</p>
                                <% } %>
                    </div>
                </div>
            </div>

            <div class="profile-sidebar">
                <div class="profile-card">
                    <h3>Brand Categories</h3>
                    <div class="category-tags">
                        <% brand.categories.forEach(category=> { %>
                            <span class="tag">
                                <%= category %>
                            </span>
                            <% }); %>
                    </div>
                </div>

                <div class="profile-card social-card">
                    <h3>Social Media</h3>
                    <div class="social-stats">
                        <% brand.socialLinks.forEach(platform=> { %>
                            <div class="social-item">
                                <i class="fab fa-<%= platform.platform %>"></i>
                                <span class="count">
                                    <%= platform.followers.toLocaleString() %>
                                </span>
                                <span class="label">followers</span>
                            </div>
                            <% }); %>
                    </div>
                </div>

                <div class="profile-card">
                    <h3>Website</h3>
                    <a href="<%= brand.website %>" class="website-link" target="_blank">
                        <i class="fas fa-globe"></i>
                        <%= brand.website.replace(/^https?:\/\//, '' ) %>
                    </a>
                </div>

                <div class="profile-card audience-card">
                    <h3>Target Audience</h3>
                    <div class="audience-info">
                        <div class="audience-item">
                            <i class="fas fa-birthday-cake"></i>
                            <span><strong>Ages:</strong>
                                <%= brand.targetAgeRange || 'Not specified' %>
                            </span>
                        </div>
                        <div class="audience-item">
                            <i class="fas fa-venus-mars"></i>
                            <span><strong>Gender:</strong>
                                <%= brand.targetGender || 'Not specified' %>
                            </span>
                        </div>
                        <div class="audience-item interests">
                            <i class="fas fa-hashtag"></i>
                            <span><strong>Interests:</strong></span>
                            <div class="interests-tags">
                                <% if (brand.targetInterests && brand.targetInterests.length> 0) { %>
                                    <% brand.targetInterests.forEach(interest=> { %>
                                        <span class="interest-tag">
                                            <%= interest %>
                                        </span>
                                        <% }); %>
                                            <% } else { %>
                                                Not specified
                                                <% } %>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="profile-card actions-card">
                    <button class="btn-danger" onclick="openDeleteModal()">
                        <i class="fas fa-trash-alt"></i> Delete Account
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div class="modal" id="editProfileModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeEditModal()">&times;</span>
            <h2>Edit Brand Profile</h2>
            <form id="profileForm" action="/brand/profile/update" method="POST">
                <div class="form-row">
                    <div class="form-group">
                        <label for="brandName">Brand Name</label>
                        <input type="text" class="form-control" id="brandName" name="name" value="<%= brand.name %>"
                            required autocomplete="organization">
                    </div>
                    <div class="form-group">
                        <label for="brandUsername">Username</label>
                        <input type="text" class="form-control" id="brandUsername" name="username"
                            value="<%= brand.username %>" required autocomplete="username">
                    </div>
                </div>

                <div class="form-group">
                    <label for="brandDescription">Brand Description</label>
                    <textarea class="form-control" id="brandDescription" name="description" required
                        autocomplete="off"><%= brand.description %></textarea>
                </div>

                <div class="form-group">
                    <label for="brandMission">Mission Statement</label>
                    <textarea class="form-control" id="brandMission" name="mission"
                        autocomplete="off"><%= brand.mission %></textarea>
                </div>

                <div class="form-group">
                    <label for="currentCampaign">Current Campaign Goals</label>
                    <textarea class="form-control" id="currentCampaign" name="currentCampaign"
                        autocomplete="off"><%= brand.currentCampaign %></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="primaryMarket">Primary Market</label>
                        <select class="form-control" id="primaryMarket" name="primaryMarket" autocomplete="country">
                            <option value="">Select market</option>
                            <option value="Global" <%=brand.primaryMarket==='Global' ? 'selected' : '' %>>Global
                            </option>
                            <option value="US" <%=brand.primaryMarket==='US' ? 'selected' : '' %>>United States</option>
                            <option value="UK" <%=brand.primaryMarket==='UK' ? 'selected' : '' %>>United Kingdom
                            </option>
                            <option value="Europe" <%=brand.primaryMarket==='Europe' ? 'selected' : '' %>>Europe
                            </option>
                            <option value="Asia" <%=brand.primaryMarket==='Asia' ? 'selected' : '' %>>Asia</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="brandWebsite">Website</label>
                        <input type="url" class="form-control" id="brandWebsite" name="website"
                            value="<%= brand.website %>" required autocomplete="url">
                    </div>
                </div>

                <div class="form-group">
                    <label for="valueInput">Brand Values</label>
                    <div id="valuesContainer" style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 10px;">
                        <% brand.values.forEach(value=> { %>
                            <span class="tag">
                                <%= value %>
                                    <span class="tag-remove" onclick="removeTag(this)">Ã—</span>
                                    <input type="hidden" name="values[]" value="<%= value %>">
                            </span>
                            <% }); %>
                    </div>
                    <div style="display: flex;">
                        <input type="text" class="form-control" id="valueInput" placeholder="Add a value..."
                            style="flex: 1;" autocomplete="off">
                        <button type="button" class="btn-secondary" onclick="addValue()"
                            style="margin-left: 10px;">Add</button>
                    </div>
                </div>

                <div class="form-group">
                    <label for="categoryInput">Categories</label>
                    <div id="categoriesContainer"
                        style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 10px;">
                        <% brand.categories.forEach(category=> { %>
                            <span class="tag">
                                <%= category %>
                                    <span class="tag-remove" onclick="removeTag(this)">Ã—</span>
                                    <input type="hidden" name="categories[]" value="<%= category %>">
                            </span>
                            <% }); %>
                    </div>
                    <div style="display: flex;">
                        <input type="text" class="form-control" id="categoryInput" placeholder="Add a category..."
                            style="flex: 1;" autocomplete="off">
                        <button type="button" class="btn-secondary" onclick="addCategory()"
                            style="margin-left: 10px;">Add</button>
                    </div>
                </div>

                <div class="form-group">
                    <label>Target Audience</label>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="targetAgeRange">Age Range</label>
                            <input type="text" class="form-control" id="targetAgeRange" name="targetAgeRange"
                                value="<%= brand.targetAgeRange %>" placeholder="e.g. 18-35" autocomplete="off">
                        </div>
                        <div class="form-group">
                            <label for="targetGender">Primary Gender</label>
                            <select class="form-control" id="targetGender" name="targetGender" autocomplete="sex">
                                <option value="">Any</option>
                                <option value="Female" <%=brand.targetGender==='Female' ? 'selected' : '' %>>Female
                                </option>
                                <option value="Male" <%=brand.targetGender==='Male' ? 'selected' : '' %>>Male</option>
                                <option value="All" <%=brand.targetGender==='All' ? 'selected' : '' %>>All Genders
                                </option>
                            </select>
                        </div>
                    </div>
                    <label for="interestInput">Interests</label>
                    <div id="interestsContainer" style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 10px;">
                        <% brand.targetInterests.forEach(interest=> { %>
                            <span class="tag">
                                <%= interest %>
                                    <span class="tag-remove" onclick="removeTag(this)">Ã—</span>
                                    <input type="hidden" name="targetInterests[]" value="<%= interest %>">
                            </span>
                            <% }); %>
                    </div>
                    <div style="display: flex;">
                        <input type="text" class="form-control" id="interestInput" placeholder="Add an interest..."
                            style="flex: 1;" autocomplete="off">
                        <button type="button" class="btn-secondary" onclick="addInterest()"
                            style="margin-left: 10px;">Add</button>
                    </div>
                </div>

                <!-- <div class="form-group">
                    <label for="logoUpload">Brand Logo</label>
                    <div class="file-upload">
                        <label class="file-upload-label" for="logoUpload">
                            <i class="fas fa-camera" style="margin-right: 8px;"></i>
                            Click to upload new logo
                            <input type="file" class="file-upload-input" id="logoUpload" name="logo" accept="image/*">
                        </label>
                        <img id="logoPreview" class="preview-image"
                            src="<%= brand.logoUrl || '/images/default-brand.png' %>" alt="Logo Preview">
                    </div>
                </div>

                <div class="form-group">
                    <label for="bannerUpload">Banner Image</label>
                    <div class="file-upload">
                        <label class="file-upload-label" for="bannerUpload">
                            <i class="fas fa-image" style="margin-right: 8px;"></i>
                            Click to upload new banner
                            <input type="file" class="file-upload-input" id="bannerUpload" name="banner"
                                accept="image/*">
                        </label>
                        <img id="bannerPreview" class="preview-image"
                            src="<%= brand.bannerUrl || '/images/default-banner.jpg' %>" alt="Banner Preview">
                    </div>
                </div> -->

                <div class="form-group">
                    <label>Social Media Links</label>
                    <div id="socialLinks" data-count="<%= brand.socialLinks.length %>">
                        <% brand.socialLinks.forEach((platform, index)=> { %>
                            <div class="social-platform-row">
                                <div class="form-group social-platform-select">
                                    <label for="socialPlatform<%= index %>">Platform</label>
                                    <select class="form-control" id="socialPlatform<%= index %>"
                                        name="socialLinks[<%= index %>][platform]">
                                        <option value="instagram" <%=platform.platform==='instagram' ? 'selected' : ''
                                            %>>Instagram</option>
                                        <option value="facebook" <%=platform.platform==='facebook' ? 'selected' : '' %>
                                            >Facebook</option>
                                        <option value="twitter" <%=platform.platform==='twitter' ? 'selected' : '' %>
                                            >Twitter</option>
                                        <option value="youtube" <%=platform.platform==='youtube' ? 'selected' : '' %>
                                            >YouTube</option>
                                        <option value="tiktok" <%=platform.platform==='tiktok' ? 'selected' : '' %>
                                            >TikTok</option>
                                        <option value="linkedin" <%=platform.platform==='linkedin' ? 'selected' : '' %>
                                            >LinkedIn</option>
                                    </select>
                                </div>
                                <div class="form-group social-platform-url">
                                    <label for="socialUrl<%= index %>">Profile URL</label>
                                    <input type="url" class="form-control" id="socialUrl<%= index %>"
                                        name="socialLinks[<%= index %>][url]" value="<%= platform.url %>"
                                        placeholder="Profile URL" autocomplete="url">
                                </div>
                                <div class="form-group social-platform-url">
                                    <label for="socialFollowers<%= index %>">Followers</label>
                                    <input type="text" class="form-control" id="socialFollowers<%= index %>"
                                        name="socialLinks[<%= index %>][followers]" value="<%= platform.followers %>"
                                        placeholder="Followers" autocomplete="off">
                                </div>
                                <div class="form-group social-platform-remove">
                                    <button type="button" class="btn-secondary" onclick="removeSocialLink(this)"
                                        style="padding: 8px 12px; width: 100%;">Ã—</button>
                                </div>
                            </div>
                            <% }); %>
                    </div>
                    <button type="button" class="btn-secondary" onclick="addSocialLink()" style="margin-top: 10px;">
                        <i class="fas fa-plus"></i> Add Social Link
                    </button>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeEditModal()">Cancel</button>
                    <button type="submit" class="btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Account Modal -->
    <div class="modal" id="deleteAccountModal">
        <div class="modal-content" style="max-width: 500px;">
            <span class="close-modal" onclick="closeDeleteModal()">&times;</span>
            <h2>Delete Your Account</h2>
            <div style="margin-bottom: 20px;">
                <p>Are you sure you want to delete your brand account? This action cannot be undone.</p>
                <p>All your campaigns, collaborations, and data will be permanently removed.</p>
            </div>
            <div class="form-group">
                <label for="confirmDelete">Type "DELETE" to confirm:</label>
                <input type="text" class="form-control" id="confirmDelete" placeholder="DELETE">
            </div>
            <div class="form-actions">
                <button type="button" class="btn-secondary" onclick="closeDeleteModal()">Cancel</button>
                <button type="button" class="btn-danger" onclick="confirmDelete()" id="deleteBtn" disabled>Delete
                    Account Permanently</button>
            </div>
        </div>
    </div>

    <style>
        /* Tab Navigation */
        .profile-tabs ul {
            display: flex;
            list-style: none;
            padding: 0;
            margin: 0;
            border-bottom: 1px solid #eee;
        }

        .tab-link {
            padding: 15px 20px;
            cursor: pointer;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab-link:hover {
            color: var(--primary-color);
        }

        .tab-link.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .tab-content {
            display: none;
            padding: 20px 0;
        }

        .tab-content.active {
            display: block;
        }

        /* Modern Layout Styles */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .profile-content {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
            margin-top: 20px;
        }

        /* Card styles */
        .profile-card {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .profile-card:hover {
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .profile-card h3 {
            color: #333;
            font-size: 18px;
            margin-top: 0;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #f0f0f0;
        }

        /* Bio section */
        .profile-bio {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
            padding: 25px;
            margin-bottom: 30px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-header h2 {
            margin: 0;
            font-size: 22px;
            color: #333;
        }

        .btn-edit {
            background: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            border-radius: 6px;
            padding: 8px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: all 0.2s;
        }

        .btn-edit i {
            margin-right: 5px;
        }

        .btn-edit:hover {
            background: var(--primary-color);
            color: #fff;
        }

        .bio-text {
            font-size: 16px;
            line-height: 1.6;
            color: #555;
            margin-bottom: 25px;
        }

        /* Info sections */
        .info-section {
            margin-bottom: 25px;
            padding-top: 15px;
        }

        .info-section h3 {
            font-size: 18px;
            color: #444;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .info-section h3 i {
            margin-right: 10px;
            color: var(--primary-color);
        }

        .info-section p {
            color: #666;
            line-height: 1.6;
        }

        /* Values tags */
        .values-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .value-tag {
            background: #f0f8ff;
            color: #0077cc;
            border-radius: 20px;
            padding: 5px 12px;
            font-size: 14px;
            display: inline-block;
        }

        /* Metrics section */
        .metrics-section {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
            padding: 25px;
            margin-bottom: 30px;
        }

        .metrics-section h2 {
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 22px;
            color: #333;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .metric-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .metric-icon {
            font-size: 24px;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .metric-value {
            font-size: 24px;
            font-weight: 700;
            color: #333;
        }

        .metric-label {
            font-size: 14px;
            color: #777;
            margin-top: 5px;
        }

        /* Campaigns section */
        .campaigns-section {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
            padding: 25px;
        }

        .campaigns-section h2 {
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 22px;
            color: #333;
        }

        .campaigns-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .campaign-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            position: relative;
            transition: all 0.3s ease;
        }

        .campaign-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .campaign-status {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 12px;
            display: flex;
            align-items: center;
        }

        .campaign-status i {
            margin-right: 5px;
            font-size: 10px;
        }

        .campaign-status.active {
            color: #28a745;
        }

        .campaign-status.upcoming {
            color: #007bff;
        }

        .campaign-status.completed {
            color: #6c757d;
        }

        .campaign-status.draft {
            color: #6c757d;
        }

        .campaign-title {
            font-size: 18px;
            margin-top: 0;
            margin-bottom: 15px;
            padding-right: 80px;
            color: #333;
        }

        .campaign-stats {
            display: flex;
            justify-content: space-between;
        }

        .campaign-stats .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .campaign-stats .stat i {
            font-size: 18px;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .campaign-stats .stat span {
            font-size: 18px;
            font-weight: 600;
            color: #444;
        }

        .campaign-stats .stat label {
            font-size: 12px;
            color: #777;
        }

        /* Sidebar styles */
        .social-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .social-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            border-radius: 8px;
            background: #f8f9fa;
        }

        .social-item i {
            font-size: 24px;
            margin-bottom: 5px;
            color: #333;
        }

        .social-item .count {
            font-weight: 600;
            font-size: 16px;
            color: #333;
        }

        .social-item .label {
            font-size: 12px;
            color: #777;
        }

        .website-link {
            display: flex;
            align-items: center;
            color: var(--primary-color);
            text-decoration: none;
            font-size: 16px;
            transition: all 0.2s;
        }

        .website-link i {
            margin-right: 8px;
        }

        .website-link:hover {
            text-decoration: underline;
        }

        .audience-info {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .audience-item {
            display: flex;
            align-items: flex-start;
        }

        .audience-item i {
            width: 25px;
            color: var(--primary-color);
            margin-right: 10px;
            margin-top: 3px;
        }

        .audience-item.interests {
            flex-direction: column;
        }

        .interests-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 8px;
            margin-left: 35px;
        }

        .interest-tag {
            background: #f0f0f0;
            color: #555;
            border-radius: 15px;
            padding: 3px 10px;
            font-size: 12px;
        }

        .actions-card {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .btn-primary,
        .btn-danger {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.2s;
        }

        .btn-primary {
            background: var(--primary-color);
            color: #fff;
        }

        .btn-primary:hover {
            background: #0056b3;
        }

        .btn-danger {
            background: #dc3545;
            color: #fff;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn-primary i,
        .btn-danger i {
            margin-right: 8px;
        }

        .no-data-message {
            color: #777;
            font-style: italic;
            text-align: center;
            margin: 20px 0;
        }

        /* Responsive styles */
        @media (max-width: 992px) {
            .profile-content {
                grid-template-columns: 1fr;
            }

            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 576px) {
            .campaigns-grid {
                grid-template-columns: 1fr;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>

    <script>
        // Initialize all event listeners when the DOM is loaded
        document.addEventListener('DOMContentLoaded', function () {
            // Modal functions
            const editModal = document.getElementById('editProfileModal');
            const deleteModal = document.getElementById('deleteAccountModal');

            if (editModal) {
                window.openEditModal = function () {
                    editModal.style.display = 'block';
                };
                window.closeEditModal = function () {
                    editModal.style.display = 'none';
                };
            }

            if (deleteModal) {
                window.openDeleteModal = function () {
                    deleteModal.style.display = 'block';
                };
                window.closeDeleteModal = function () {
                    deleteModal.style.display = 'none';
                };
            }

            // Close modals when clicking outside
            window.addEventListener('click', function (event) {
                if (event.target === editModal) {
                    closeEditModal();
                }
                if (event.target === deleteModal) {
                    closeDeleteModal();
                }
            });

            // Form submission handling
            const profileForm = document.getElementById('profileForm');
            if (profileForm) {
                profileForm.addEventListener('submit', async function (e) {
                    e.preventDefault();

                    const form = e.target;
                    const formData = new FormData(form);

                    // Create a structured data object
                    const data = {
                        name: formData.get('name'),
                        username: formData.get('username'),
                        description: formData.get('description'),
                        mission: formData.get('mission'),
                        currentCampaign: formData.get('currentCampaign'),
                        primaryMarket: formData.get('primaryMarket'),
                        website: formData.get('website'),
                        targetAgeRange: formData.get('targetAgeRange'),
                        targetGender: formData.get('targetGender'),
                        values: [],
                        categories: [],
                        targetInterests: [],
                        socialLinks: []
                    };

                    // Collect values, categories, and interests
                    formData.getAll('values[]').forEach(value => {
                        if (value.trim()) data.values.push(value.trim());
                    });
                    formData.getAll('categories[]').forEach(category => {
                        if (category.trim()) data.categories.push(category.trim());
                    });
                    formData.getAll('targetInterests[]').forEach(interest => {
                        if (interest.trim()) data.targetInterests.push(interest.trim());
                    });

                    // Collect social links
                    const socialLinksContainer = document.getElementById('socialLinks');
                    if (socialLinksContainer) {
                        const socialLinkRows = socialLinksContainer.querySelectorAll('.social-platform-row');

                        socialLinkRows.forEach(row => {
                            const platform = row.querySelector('select[name$="[platform]"]')?.value;
                            const url = row.querySelector('input[name$="[url]"]')?.value;
                            const followers = row.querySelector('input[name$="[followers]"]')?.value;

                            if (platform && url) {
                                data.socialLinks.push({
                                    platform,
                                    url,
                                    followers: parseInt(followers) || 0
                                });
                            }
                        });
                    }

                    try {
                        const response = await fetch(form.action, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(data)
                        });

                        const result = await response.json();

                        if (result.success) {
                            alert('Profile updated successfully!');
                            window.location.reload();
                        } else {
                            alert(result.message || 'Error updating profile');
                            if (result.errors) {
                                console.error('Validation errors:', result.errors);
                            }
                        }
                    } catch (error) {
                        console.error('Error:', error);
                        alert('An error occurred while updating the profile');
                    }
                });
            }

            // Delete account confirmation
            const confirmDeleteInput = document.getElementById('confirmDelete');
            const deleteBtn = document.getElementById('deleteBtn');

            if (confirmDeleteInput && deleteBtn) {
                confirmDeleteInput.addEventListener('input', function (e) {
                    deleteBtn.disabled = this.value !== 'DELETE';
                });
            }

            // Sidebar toggle functions
            const navMenu = document.getElementById('navMenu');
            if (navMenu) {
                window.openMenu = function () {
                    navMenu.style.width = "250px";
                };
                window.closeMenu = function () {
                    navMenu.style.width = "0";
                };
            }

            // Tag management functions
            window.addTag = function (containerId, inputId, name) {
                const input = document.getElementById(inputId);
                const container = document.getElementById(containerId);

                if (input && container && input.value.trim() !== '') {
                    const tag = document.createElement('span');
                    tag.className = 'tag';
                    tag.innerHTML = `
                    ${input.value.trim()}
                    <span class="tag-remove" onclick="removeTag(this)">Ã—</span>
                        <input type="hidden" name="${name}[]" value="${input.value.trim()}">
                `;
                    container.appendChild(tag);
                    input.value = '';
                }
            };

            window.addValue = function () {
                addTag('valuesContainer', 'valueInput', 'values');
            };

            window.addCategory = function () {
                addTag('categoriesContainer', 'categoryInput', 'categories');
            };

            window.addInterest = function () {
                addTag('interestsContainer', 'interestInput', 'targetInterests');
            };

            window.removeTag = function (element) {
                if (element && element.parentElement) {
                    element.parentElement.remove();
                }
            };

            // Social links management
            window.addSocialLink = function () {
                const container = document.getElementById('socialLinks');
                if (!container) return;

                const newLink = document.createElement('div');
                newLink.className = 'social-platform-row';
                newLink.innerHTML = `
                <div class="form-group social-platform-select">
                        <select class="form-control" name="socialLinks[${container.children.length}][platform]">
                        <option value="instagram">Instagram</option>
                        <option value="facebook">Facebook</option>
                        <option value="twitter">Twitter</option>
                        <option value="youtube">YouTube</option>
                        <option value="tiktok">TikTok</option>
                        <option value="linkedin">LinkedIn</option>
                    </select>
                </div>
                <div class="form-group social-platform-url">
                        <input type="url" class="form-control" name="socialLinks[${container.children.length}][url]" placeholder="Profile URL">
                </div>
                <div class="form-group social-platform-url">
                        <input type="text" class="form-control" name="socialLinks[${container.children.length}][followers]" placeholder="Followers">
                </div>
                <div class="form-group social-platform-remove">
                    <button type="button" class="btn-secondary" onclick="removeSocialLink(this)" style="padding: 8px 12px; width: 100%;">Ã—</button>
                </div>
            `;
                container.appendChild(newLink);
            };

            window.removeSocialLink = function (button) {
                if (button && button.closest('.social-platform-row')) {
                    button.closest('.social-platform-row').remove();
                }
            };
        });
    </script>
</body>

</html>